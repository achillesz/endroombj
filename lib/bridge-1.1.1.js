/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

!function(){var e,n,t;!function(r){function i(e,n){return y.call(e,n)}function o(e,n){var t,r,i,o,c,u,a,l,f,s,p,g=n&&n.split("/"),d=b.map,m=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(n){for(g=g.slice(0,g.length-1),e=e.split("/"),c=e.length-1,b.nodeIdCompat&&w.test(e[c])&&(e[c]=e[c].replace(w,"")),e=g.concat(e),f=0;f<e.length;f+=1)if(p=e[f],"."===p)e.splice(f,1),f-=1;else if(".."===p){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((g||m)&&d){for(t=e.split("/"),f=t.length;f>0;f-=1){if(r=t.slice(0,f).join("/"),g)for(s=g.length;s>0;s-=1)if(i=d[g.slice(0,s).join("/")],i&&(i=i[r])){o=i,u=f;break}if(o)break;!a&&m&&m[r]&&(a=m[r],l=f)}!o&&a&&(o=a,u=l),o&&(t.splice(0,u,o),e=t.join("/"))}return e}function c(e,n){return function(){return g.apply(r,A.call(arguments,0).concat([e,n]))}}function u(e){return function(n){return o(n,e)}}function a(e){return function(n){h[e]=n}}function l(e){if(i(v,e)){var n=v[e];delete v[e],E[e]=!0,p.apply(r,n)}if(!i(h,e)&&!i(E,e))throw new Error("No "+e);return h[e]}function f(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function s(e){return function(){return b&&b.config&&b.config[e]||{}}}var p,g,d,m,h={},v={},b={},E={},y=Object.prototype.hasOwnProperty,A=[].slice,w=/\.js$/;d=function(e,n){var t,r=f(e),i=r[0];return e=r[1],i&&(i=o(i,n),t=l(i)),i?e=t&&t.normalize?t.normalize(e,u(n)):o(e,n):(e=o(e,n),r=f(e),i=r[0],e=r[1],i&&(t=l(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:t}},m={require:function(e){return c(e)},exports:function(e){var n=h[e];return"undefined"!=typeof n?n:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:s(e)}}},p=function(e,n,t,o){var u,f,s,p,g,b,y=[],A=typeof t;if(o=o||e,"undefined"===A||"function"===A){for(n=!n.length&&t.length?["require","exports","module"]:n,g=0;g<n.length;g+=1)if(p=d(n[g],o),f=p.f,"require"===f)y[g]=m.require(e);else if("exports"===f)y[g]=m.exports(e),b=!0;else if("module"===f)u=y[g]=m.module(e);else if(i(h,f)||i(v,f)||i(E,f))y[g]=l(f);else{if(!p.p)throw new Error(e+" missing "+f);p.p.load(p.n,c(o,!0),a(f),{}),y[g]=h[f]}s=t?t.apply(h[e],y):void 0,e&&(u&&u.exports!==r&&u.exports!==h[e]?h[e]=u.exports:s===r&&b||(h[e]=s))}else e&&(h[e]=t)},e=n=g=function(e,n,t,i,o){if("string"==typeof e)return m[e]?m[e](n):l(d(e,n).f);if(!e.splice){if(b=e,b.deps&&g(b.deps,b.callback),!n)return;n.splice?(e=n,n=t,t=null):e=r}return n=n||function(){},"function"==typeof t&&(t=i,i=o),i?p(r,e,n,t):setTimeout(function(){p(r,e,n,t)},4),g},g.config=function(e){return g(e)},e._defined=h,t=function(e,n,t){n.splice||(t=n,n=[]),i(h,e)||i(v,e)||(v[e]=[e,n,t])},t.amd={jQuery:!0}}(),t("lib/almond",function(){}),t("src/bridge/bridge",[],function(){var e={};if(navigator.userAgent.match(/ ew(\w+)\/([\d.-_]*)/i)){var n=navigator.userAgent.match(/ ew\w+\/([\d.-_]*)/i)[1];n.match(/[1-9]\.[^_]*/)&&(n=n.match(/[1-9]\.[^_]*/)[0]),e.RUNTIME_VERSION=n}else e.RUNTIME_VERSION=0;return navigator.userAgent.match(/android/i)?e.PLATFORM=1:navigator.userAgent.match(/(iphone)|(ipad)|(ipod)/i)?e.PLATFORM=2:e.PLATFORM=0,e.ready=function(e){return/complete|loaded|interactive/.test(document.readyState)?void e():void document.addEventListener("DOMContentLoaded",e,!1)},e}),t("src/bridge/util",[],function(){var e={},n=22,t=Object.prototype.hasOwnProperty;return e.clone=function(n){if(!n||"object"!=typeof n)return n;var t={};for(var r in n)t[r]=e.clone(n[r]);return t},e.isEmpty=function(e){if(null===e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var n in e)if(t.call(e,n))return!1;return!0},e.cleanoptions=function(n){var t;return"object"==typeof n&&(t=e.clone(n),delete t.onsuccess,delete t.onfail),e.isEmpty(t)?"":JSON.stringify(t)},e.uniq=function(){return n++},e}),t("src/bridge/delegate",["src/bridge/bridge","src/bridge/util"],function(e,n){var t,r=3e3,i=n.uniq,o=n.cleanoptions,c=[],u=-1,a={error:2,msg:"runtime does not support this function"+name};if("undefined"==typeof ElongApp){var l=function(){if(c.length){for(var e=0,n=c.length;n>e;e++)"undefined"!=typeof ElongApp&&"function"==typeof ElongApp[c[e][0]]?c[e][2]?ElongApp[c[e][0]](c[e][1],c[e][2]):ElongApp[c[e][0]](c[e][1]):window.eval(c[e][1])(a);c.length=0}};(location.search.match(/[?|&]inElongApp=1/)||e.RUNTIME_VERSION>="8.4.0")&&2===e.PLATFORM&&(u=0,t=setTimeout(function(){if(console.log("timeout! waiting for the ElongAppReady for "+r+"ms"),u=-1,ElongApp={},"function"==typeof Event){var e=new Event("ElongAppReady");document.dispatchEvent(e)}l()},r),document.addEventListener("ElongAppReady",function(){clearTimeout(t),u=1,l()}))}else u=1;var f={};window.jscallbacks=f;var s={};return function(e,n){n&&n.onsuccess||console.warn("no options.onsuccess found..");var t=i(),r="cb"+t;if(s[r]=n,f[r]=function(e){var n;n="string"==typeof e?JSON.parse(e):e;var t=s[r];n.error?(console.error(n),t.onfail&&t.onfail(n)):t.onsuccess(n)},0===u)c.push([e,"jscallbacks['"+r+"']",o(n)]);else if("undefined"!=typeof ElongApp&&"function"==typeof ElongApp[e]){var l=o(n);l?ElongApp[e]("jscallbacks['"+r+"']",o(n)):ElongApp[e]("jscallbacks['"+r+"']")}else console.error(a),n&&n.onfail&&n.onfail(a)}}),t("src/bridge/account",["src/bridge/bridge","src/bridge/util"],function(e,n){return e.accountLogin=function(n){e.delegate("accountLogin",n)},e.accountGet=function(n){e.delegate("accountGet",n)},e.locationGet=function(n){e.delegate("locationGet",n)},e.shareWx=function(n){n.img_url?n.imgUrl=n.img_url:n.img_url=n.imgUrl,"8.4.0"!=e.RUNTIME_VERSION&&2===e.PLATFORM?(n.type="3",n.imgWidth=n.imgWidth||"640",n.imgHeight=n.imgHeight||"640",e.delegate("share",n)):e.delegate("shareWx",n)},e.share=function(n){e.delegate("share",n)},e.showBtn=function(n){e.delegate("showBtn",n)},e.appPage=function(n){e.delegate("appPage",n)},e.takeMeTo=function(n){e.delegate("takeMeTo",n)},e}),n(["src/bridge/bridge","src/bridge/delegate","src/bridge/account"],function(e,n){var t={0:"success",1:"input error",2:"common error",3:"cancel"};e.ErrCode=t,e.delegate=n,window.ElongBridge=e},void 0,!0),t("src/bridge/bridgeentry.js",function(){})}();